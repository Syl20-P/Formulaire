async function initForm() {
  const response = await fetch("https://n8n.srv1108117.hstgr.cloud/webhook/get-equipements");
  const equipments = await response.json();

  // Locations uniques valides
  const locationsSet = new Set(
    equipments.map(e => e.property_location).filter(loc => loc)
  );
  const origineSelect = document.getElementById("origine");
  const destinationSelect = document.getElementById("destination");
  locationsSet.forEach(loc => {
    const o = document.createElement("option"); o.value = loc; o.textContent = loc;
    const d = document.createElement("option"); d.value = loc; d.textContent = loc;
    origineSelect.appendChild(o);
    destinationSelect.appendChild(d);
  });

  // Équipements
  const container = document.getElementById("equipementsContainer");
  equipments.forEach(e => {
    if(e.name && e.property_quantity_in_stock != null) {
      const div = document.createElement("div");
      div.innerHTML = `
        <input type="checkbox" name="equipement" value="${e.name}" id="${e.name}">
        <label for="${e.name}">${e.name} (${e.property_quantity_in_stock} dispo)</label>
        Quantité: <input type="number" name="qty_${e.name}" min="0" value="0">
      `;
      container.appendChild(div);
    }
  });
}
